<link rel='icon' type='image/png' href='../favicon.png'>
<style>
html {
  background-color: greenyellow;
  font-family: sans-serif;
}
.container {
  margin: 25px;
  padding: 25px;
  background-color: white;
}
.monospace {
  font-family: monospace;
}
pre {
  white-space: pre-wrap;
}
table {
  border-collapse: collapse;
}
th, td {
  border: 1px solid black;
  padding: 0px 10px;
}
th {
  font-weight: bold;
}
</style>
<p><a href='index.html'>&larr; back</a></p>
<div class='container'>
<h3>Coronavirus Recovery Activity</h3>
<p>Our task was to analyse coronavirus recovery data from India from January 2020 to March 2020 using RStudio.</p>
<p>The data came from <a href='https://www.kaggle.com/datasets/aditeloo/a-small-covid19-dataset' target='_blank'>here on Kaggle</a>. Here's a sample of the data. (There are actually 270 rows.)</p>
<table class='monospace'>
  <thead>
    <tr><th>Sno</th><th>Date</th><th>State/UnionTerritory</th><th>ConfirmedIndianNational</th><th>ConfirmedForeignNational</th><th>Cured</th><th>Deaths</th></tr>
  </thead>
  <tbody>
    <tr><td>1</td><td>30-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td></tr>
    <tr><td>2</td><td>31-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td></tr>
    <tr><td>3</td><td>01-02-2020</td><td>Kerala</td><td>2</td><td>0</td><td>0</td><td>0</td></tr>
    <tr><td>4</td><td>02-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
    <tr><td>5</td><td>03-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td></tr>
  </tbody>
</table>
<p>First I created a frequency table to count how many daily reports came from each state.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`)</pre>
<p>Here are the first few results.</p>
<table class='monospace'>
  <thead>
    <tr><th>State/UnionTerritory</th><th>Freq</th></tr>
  </thead>
  <tbody>
    <tr><td>Andhra Pradesh</td><td>10</td></tr>
    <tr><td>Chandigarh</td><td>1</td></tr>
    <tr><td>Chattisgarh</td><td>1</td></tr>
    <tr><td>Chhattisgarh</td><td>2</td></tr>
    <tr><td>Delhi</td><td>20</td></tr>
  </tbody>
</table>
<p>The results show that the Indian states weren't named consistently, for example "Chhattisgarh" was named "Chattisgarh" in one record. I browsed the other records and saw that Union territories were also not named consistently, for example, "Ladakh" was sometimes named "Union Territory of Ladakh".</p>
<p>I used this R code to tidy the data.</p>
<pre>library(dplyr)

#rename any states named "Chattisgarh"
Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory` &lt;- which(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory` == "Chattisgarh") %&gt;% 
  replace(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`, ., "Chhattisgarh")

#get row numbers of states starting with "Union Territory of "
ut &lt;- which(substr(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`, 1, 19) == "Union Territory of ")

#remove "Union Territory of " from the start of any state names
Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`[ut] &lt;-
  substr(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`[ut], 20, nchar(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`[ut]))
</pre>
<p>I created the frequency table again with the corrected data.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`)</pre>
<p>Here are the first few results.</p>
<table class='monospace'>
  <thead>
    <tr><th>State/UnionTerritory</th><th>Freq</th></tr>
  </thead>
  <tbody>
    <tr><td>Andhra Pradesh</td><td>10</td></tr>
    <tr><td>Chandigarh</td><td>1</td></tr>
    <tr><td>Chhattisgarh</td><td>3</td></tr>
    <tr><td>Delhi</td><td>20</td></tr>
    <tr><td>Gujarat</td><td>2</td></tr>
  </tbody>
</table>
<p>I put the results in descending order to see which states appeared most frequently.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$`State/UnionTerritory`) %&gt;%
  as.data.frame() %&gt;%
  arrange(desc(Freq))
</pre>
<p>Here are the first ten results.</p>
<table class='monospace'>
  <thead>
    <tr><th>State/UnionTerritory</th><th>Freq</th></tr>
  </thead>
  <tbody>
    <tr><td>Kerala</td><td>52</td></tr>
    <tr><td>Delhi</td><td>20</td></tr>
    <tr><td>Telengana</td><td>20</td></tr>
    <tr><td>Rajasthan</td><td>19</td></tr>
    <tr><td>Haryana</td><td>18</td></tr>
    <tr><td>Uttar Pradesh</td><td>18</td></tr>
    <tr><td>Ladakh</td><td>15</td></tr>
    <tr><td>Tamil Nadu</td><td>15</td></tr>
    <tr><td>Jammu and Kashmir</td><td>13</td></tr>
    <tr><td>Karnataka</td><td>13</td></tr>
  </tbody>
</table>
<p>I wanted to find range of dates, but the "Date" column was "character" data type, so I made a new column with "Date" data type, then found the difference between the first and last dates.</p>
<pre>Covid19_India_Jan_20_Mar_20_$date_converted &lt;- as.Date(Covid19_India_Jan_20_Mar_20_$Date, format = "%d-%m-%Y")

max(Covid19_India_Jan_20_Mar_20_$date_converted) - min(Covid19_India_Jan_20_Mar_20_$date_converted)

Time difference of 51 days
</pre>
<p>I created a frequency table to count how many daily reports showed recoveries versus no recoveries during this period.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$Cured == 0)
  
FALSE  TRUE
   55   215
</pre>
<p>I also checked this produced the opposite result if I used <span class='monospace'>Cured > 0</span>.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$Cured &gt; 0)

FALSE  TRUE
  215    55
</pre>
<p>I turned the results into percentages.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$Cured == 0)/nrow(Covid19_India_Jan_20_Mar_20_) * 100

   FALSE     TRUE
20.37037 79.62963
</pre>
<p>I added a variable <span class='monospace'>has_recovery</span> that indicates whether any recoveries were reported.</p>
<pre>Covid19_India_Jan_20_Mar_20_$has_recovery &lt;- Covid19_India_Jan_20_Mar_20_$Cured &gt; 0
</pre>
<table class='monospace'>
  <thead>
    <tr><th>Sno</th><th>Date</th><th>State/UnionTerritory</th><th>ConfirmedIndianNational</th><th>ConfirmedForeignNational</th><th>Cured</th><th>Deaths</th><th>has_recovery</th></tr>
  </thead>
  <tbody>
    <tr><td>1</td><td>30-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td></tr>
    <tr><td>2</td><td>31-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td></tr>
    <tr><td>3</td><td>01-02-2020</td><td>Kerala</td><td>2</td><td>0</td><td>0</td><td>0</td><td>FALSE</td></tr>
    <tr><td>4</td><td>02-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td></tr>
    <tr><td>5</td><td>03-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td></tr>
  </tbody>
</table>
<p>I added another variable <span class='monospace'>has_deaths</span> that indicates whether any deaths were reported.</p>
<pre>Covid19_India_Jan_20_Mar_20_$has_deaths &lt;- Covid19_India_Jan_20_Mar_20_$Deaths &gt; 0
</pre>
<table class='monospace'>
  <thead>
    <tr><th>Sno</th><th>Date</th><th>State/UnionTerritory</th><th>ConfirmedIndianNational</th><th>ConfirmedForeignNational</th><th>Cured</th><th>Deaths</th><th>has_recovery</th><th>has_deaths</th></tr>
  </thead>
  <tbody>
    <tr><td>1</td><td>30-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td></tr>
    <tr><td>2</td><td>31-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td></tr>
    <tr><td>3</td><td>01-02-2020</td><td>Kerala</td><td>2</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td></tr>
    <tr><td>4</td><td>02-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td></tr>
    <tr><td>5</td><td>03-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td></tr>
  </tbody>
</table>
<p>I created a frequency table to count how many daily reports showed deaths during this period.</p>
<pre>table(Covid19_India_Jan_20_Mar_20_$has_deaths)
  
FALSE  TRUE
  245    25
</pre>
<p>I converted the <span class='monospace'>has_deaths</span> variable to a factor variable <span class='monospace'>has_deaths_factor</span> with labels "No Deaths" and "Deaths Reported".</p>
<pre>Covid19_India_Jan_20_Mar_20_$has_deaths_factor &lt;- factor(Covid19_India_Jan_20_Mar_20_$has_deaths, labels = c("No Deaths", "Deaths Reported"))</pre>
<table class='monospace'>
  <thead>
    <tr><th>Sno</th><th>Date</th><th>State/UnionTerritory</th><th>ConfirmedIndianNational</th><th>ConfirmedForeignNational</th><th>Cured</th><th>Deaths</th><th>has_recovery</th><th>has_deaths</th><th>has_deaths_factor</th></tr>
  </thead>
  <tbody>
    <tr><td>1</td><td>30-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td></tr>
    <tr><td>2</td><td>31-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td></tr>
    <tr><td>3</td><td>01-02-2020</td><td>Kerala</td><td>2</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td></tr>
    <tr><td>4</td><td>02-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td></tr>
    <tr><td>5</td><td>03-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td></tr>
  </tbody>
</table>
<p>Finally I created a categorical variable called case_level based on total confirmed cases - Indian nationals and foreign nationals.<br>
0 total cases: "No Cases"<br>
1-5 total cases: "Low Cases"<br>
6-15 total cases: "Medium Cases"<br>
16+ total cases: "High Cases"</p>
<pre>Covid19_India_Jan_20_Mar_20_$case_level &lt;- as.factor(ifelse(Covid19_India_Jan_20_Mar_20_$ConfirmedIndianNational + Covid19_India_Jan_20_Mar_20_$ConfirmedForeignNational &lt; 1, "No Cases",
                                                            ifelse(Covid19_India_Jan_20_Mar_20_$ConfirmedIndianNational + Covid19_India_Jan_20_Mar_20_$ConfirmedForeignNational &lt; 6, "Low Cases",
                                                                   ifelse(Covid19_India_Jan_20_Mar_20_$ConfirmedIndianNational + Covid19_India_Jan_20_Mar_20_$ConfirmedForeignNational &lt; 16, "Medium Cases", "High Cases"))))
</pre>
<table class='monospace'>
  <thead>
    <tr><th>Sno</th><th>Date</th><th>State/UnionTerritory</th><th>ConfirmedIndianNational</th><th>ConfirmedForeignNational</th><th>Cured</th><th>Deaths</th><th>has_recovery</th><th>has_deaths</th><th>has_deaths_factor</th><th>case_level</th></tr>
  </thead>
  <tbody>
    <tr><td>1</td><td>30-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td><td>Low Cases</td></tr>
    <tr><td>2</td><td>31-01-2020</td><td>Kerala</td><td>1</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td><td>Low Cases</td></tr>
    <tr><td>3</td><td>01-02-2020</td><td>Kerala</td><td>2</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td><td>Low Cases</td></tr>
    <tr><td>4</td><td>02-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td><td>Low Cases</td></tr>
    <tr><td>5</td><td>03-02-2020</td><td>Kerala</td><td>3</td><td>0</td><td>0</td><td>0</td><td>FALSE</td><td>FALSE</td><td>No Deaths</td><td>Low Cases</td></tr>
  </tbody>
</table>
<p>This was an excellent practical activity for applying my R coding skills!
</div>
